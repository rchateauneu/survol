<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Survol installation notes</title>

<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-type" content="text/html; charset=UTF-8"></head>
<body>
<div class="" style="text-align: center; font-family: DejaVu Sans;"><a href="survol.htm"><img style="border: 0px solid ; width: 200px; height: 200px; float: left;" alt="Logo" src="LogoColorTextRight.jpeg"></a><big><big><big><span style="font-weight: bold;"><small><small><small><br>
<br>
</small></small></small></span></big></big></big><big><big><big><span style="font-weight: bold;"></span></big></big></big><big><big><big><span style="font-weight: bold;">SURVOL INSTALLATION NOTES</span></big></big></big><br>
</div>
<br style="font-family: DejaVu Sans;">
<div style="text-align: left; font-family: DejaVu Sans;"><br>
</div>
<div style="text-align: left; font-family: DejaVu Sans;"><span style="font-style: italic; font-weight: bold;"></span></div>
<span style="font-style: italic; font-weight: bold; font-family: DejaVu Sans;"><br>
&nbsp;</span><br style="font-family: DejaVu Sans;">
<span style="font-style: italic; font-weight: bold; font-family: DejaVu Sans;"></span><span style="font-style: italic; font-weight: bold; font-family: DejaVu Sans;"><br>
PYTHON PACKAGE INSTALLATION<br>
<br>
</span><span style="font-family: DejaVu Sans;">Survol server-side code is a pure-Python module and as such can be installed like any module. The packages are available&nbsp;</span><span style="font-family: DejaVu Sans;">on <span style="text-decoration: underline;">t</span></span><span style="font-family: DejaVu Sans;"></span>he <a href="https://pypi.python.org/pypi">Python Package Index</a> (Pypi), which is a repository of software for the Python
programming language<span style="font-family: DejaVu Sans;"><br></span><ul style="font-family: DejaVu Sans;"><li><a href="https://pypi.python.org/pypi/survol/">Survol
source distribution</a>, complete package, can be
downloaded and installed as any Python module. </li><li><a href="https://testpypi.python.org/pypi/survol/">Survol
on Pypi (Test)</a> , same content on test site.</li></ul><span style="font-family: DejaVu Sans;">The installation command is:<br><br><span style="font-family: Courier New;">pip install survol</span><br><br><br></span><span style="font-style: italic; font-weight: bold; font-family: DejaVu Sans;">INSTALLATION FORM THE SOURCES<br><br></span><span style="font-family: DejaVu Sans;">It is also possible to install Survol from the source code which is avalaible at two places:<br></span><ul style="font-family: DejaVu Sans;"><li><a href="https://github.com/rchateauneu/survol">Survol
on Github</a>: This is the main GIT repository; the project name
is
"survol".</li><li><a href="https://sourceforge.net/projects/survol/">Survol
on Sourceforge</a>: A backup source repository.</li></ul><span style="font-family: DejaVu Sans;"><br><span style="font-weight: bold; font-style: italic;">SOFTWARE REQUIREMENTS</span><br><br>Your
machine needs a recent Python 2 or Python 3 interpreter. Great care is
taken to ensure compatibility with all common Python versions.<br><br>The required Python modules are:<br></span><ul><li>rdflib. Work is being done to eliminate this requirement.</li><li>psutil: Strictly speaking, is optional, but very convenient to have.</li></ul><span style="font-family: DejaVu Sans;">There are no other requirements. The rest is optional.<br></span><span style="font-style: italic; font-weight: bold; font-family: DejaVu Sans;"></span><br>
<br>
<span style="font-style: italic; font-family: DejaVu Sans;"><span style="font-weight: bold;">SOURCE REPOSITORIES</span></span><br style="font-weight: bold; font-family: DejaVu Sans;">
<span style="font-weight: bold; font-family: DejaVu Sans;"></span><br style="font-family: DejaVu Sans;">
<span style="font-family: DejaVu Sans;"></span><span style="font-family: DejaVu Sans;">Survol can of
course be installed from the sources, which are stored at two places:</span>
<ul style="font-family: DejaVu Sans;"><li><a href="https://pypi.python.org/pypi/survol/">Survol
source distribution, on Pypy</a>, complete package, can be
downloaded and installed as any Python module. </li><li><a href="https://testpypi.python.org/pypi/survol/">Survol
on Pypi (Test)</a> , same on test site.</li></ul><span style="font-style: italic; font-family: DejaVu Sans;"><span style="font-weight: bold;"></span></span><span style="font-family: DejaVu Sans;"><br></span><span style="font-style: italic; font-weight: bold; font-family: DejaVu Sans;">USING THE AD HOC CGI SERVER</span><span style="font-family: DejaVu Sans;"><br></span><br><span style="font-family: DejaVu Sans;">Survol comes with a very simple CGI server started by the script <span style="font-family: Courier New;">survol/scripts/cgiserver.py</span>
. Therefore, it can run on very small platforms. Also, it is easy to
run Survol on a user account&nbsp;with full read access rights.</span><br style="font-family: DejaVu Sans;"><span style="font-family: DejaVu Sans;"><br><span style="font-family: Courier New;">$ cgiserver -h</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">Survol HTTP server:</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">cgiserver</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; -p,--port=&lt;number&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TCP/IP port number. Default is 8000</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; -a,--address=&lt;host&gt;&nbsp;&nbsp;&nbsp;&nbsp; IP address. Default value is local host name.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; -b,--browser=&lt;program&gt;&nbsp; Starts a browser</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; -v,--verbose&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Verbose mode</span><br><br>Example of commands:<br><br><span style="font-family: Courier New;">$ cgiserver -b "C:\Program Files (x86)\Mozilla Firefox\firefox.exe"</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">$ cgiserver -b "C:\Program Files\Internet Explorer\iexplore.exe"</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">$ cgiserver -b webbrowser # Uses default browser.</span><br><br><br></span><span style="font-style: italic; font-weight: bold; font-family: DejaVu Sans;">
APACHE SETUP</span><span style="font-family: DejaVu Sans;"><br><br>
If your browser runs ActiveX, it is also possible to use Survol web
pages with no agent.<br>
<br>
Survol
is based on a tree of Python scripts, all of them display information
of the system the agent is running on. Some scripts do not need
parameters: They will return information with no context: For example,
all available databases, all detected machines on the network, all
installed Python modules etc... Other scripts need parameters, as they
display information about a specific object. For example; Files opened
by a specific process. Columns of a SQL Server</span><span style="font-family: DejaVu Sans;">&#8482;</span><span style="font-family: DejaVu Sans;"> table. Processes
connected to an Oracle&#8482; database.</span><br><br><span style="font-family: DejaVu Sans; font-style: italic; font-weight: bold;"><br>APACHE</span><span style="font-family: DejaVu Sans;"><span style="font-weight: bold; font-style: italic;"> CGI SCRIPTS SETUP</span><br><br><img alt="Common Gateway Interface public domain logo" title="Common Gateway Interface public domain logo" src="https://en.wikipedia.org/wiki/Common_Gateway_Interface#/media/File:CGIlogo.gif"><img style="width: 80px; height: 64px; float: right;" alt="Common Gateway Interface public domain logo" title="Common Gateway Interface" src="https://upload.wikimedia.org/wikipedia/en/c/cd/CGIlogo.gif">The
HTTP Server Apache must be able to run all Python scripts residing
under the directory survol/sources_types as CGI scripts. On Windows, it
is necessary to specify to Apache which Python interpreter must be used
to run the CGI scripts. On Windows, this is done in the registry, with
various keys depending on the Windows operating system version.<br><br>On
Windows 7, see the key HKEY_CLASSES_ROOT\.py\Shell\ExecCGI\Command :
The key "Default" contains the program name, which can for example be:<br><br><span style="font-family: Courier New;">C:\Program Files (x86)\Python32\pythonw.exe -u</span><br><br>With Windows XP, the command is the key itself. "C:\Python\3.2.3-0.3\pythonw.exe -u"<br><br>On Linux, all CGI scripts must be executable and the first line specifies the Pyton interpreter.<br>http://stackoverflow.com/questions/2036577/how-do-i-ignore-the-perl-shebang-on-windows-with-apache-2<br><br></span><span style="font-family: DejaVu Sans; font-style: italic; font-weight: bold;"><br>APACHE</span><span style="font-family: DejaVu Sans;"><span style="font-style: italic; font-weight: bold;"> CGI CONFIGURATION FILE</span><br></span><br><span style="font-family: DejaVu Sans;">The
configuration file httpd.conf must be edited. It is also possible to
create a new survol.conf file, which is a preferred solution. In both
cases, the content is similar to this lines, which suppose that the
sources are copied in the directory&nbsp;<span style="font-family: Courier New;">C:/Projects/Survol</span>:</span><br style="font-family: DejaVu Sans;"><br><span style="font-family: Courier New;">AddHandler cgi-script .py</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;"># Depending on where the sources are:</span><br style="font-family: Courier New;"><span style="font-family: Courier New;"></span><span style="font-family: Courier New;">Alias /Survol "C:/Projects/Survol"<br>&lt;Directory "</span><span style="font-family: Courier New;">C:/Projects/Survol</span><span style="font-family: Courier New;">" &gt;<br>&nbsp;&nbsp;&nbsp; Options Indexes FollowSymLinks Includes ExecCGI<br>&nbsp;&nbsp;&nbsp; Allow from all<br>&nbsp;&nbsp;&nbsp; AddHandler cgi-script .py<br>&nbsp;&nbsp;&nbsp; ScriptInterpreterSource Registry-Strict <br>&nbsp;&nbsp;&nbsp; SetEnv PYTHONPATH&nbsp;</span><span style="font-family: Courier New;">C:/Projects/Survol</span><span style="font-family: Courier New;">/survol<br>&lt;/Directory&gt;</span><br><br><span style="font-family: DejaVu Sans;">All HTTP results generated by scripts allow HTTP cross requests (Access-Control-Allow-Origin). </span><br style="font-family: DejaVu Sans;"><span style="font-family: DejaVu Sans;">This
permits to merge information from several agents, into a single browser
session. It makes also&nbsp;possible for a static html page to load
json URLs from remote agents.</span><br style="font-family: DejaVu Sans;"><br style="font-family: DejaVu Sans;"><span style="font-family: DejaVu Sans;"></span><span style="font-style: italic; font-family: DejaVu Sans;"><span style="font-weight: bold;"><br>TESTING INDIVIDUAL SCRIPTS</span></span><span style="font-family: DejaVu Sans;"><br></span><span style="font-family: DejaVu Sans; font-style: italic;"><br></span><span style="font-family: DejaVu Sans;">Once
the core features are installed, it might be possible that some CGI
scripts do not work, or not as expected. Errors are normally displayed
when detected, and the Apache log file contains all the information
writted to stderr. If this is not enough, a very powerful debugging
technique is to run&nbsp;CGI scripts as
command-line Python mode, by setting a couple of mandatory environment
variables. This allows to test a program in isolation, possibly in a
debugger, with full visibility on its context, inputs and outputs.
Here is an example:<br><br><span style="font-family: Courier New;">PYTHONPATH=/homez.85/primhilltc/survol/survol \</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">SERVER_NAME=debug.primhillcomputers.com \</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">SCRIPT_NAME=sources_types/CIM_ComputerSystem/mysql_databases.py \</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">QUERY_STRING="xid=CIM_ComputerSystem.Name%3Dprimhilltcsrvdb1.mysql.db&amp;mode=json" \</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">python survol/sources_types/CIM_ComputerSystem/mysql_databases.py</span><br></span><br><span style="font-family: DejaVu Sans;">With this command, the CGI script </span><span style="font-family: DejaVu Sans;"><span style="font-family: Courier New;">mysql_databases.py</span> runs as if it is launched by a HTTP server.</span><span style="font-family: DejaVu Sans;"><br></span><br><span style="font-family: DejaVu Sans;"><br><span style="font-weight: bold; font-style: italic;">SERVICE LOCATION PROTOCOL</span><br><br></span><span style="font-family: DejaVu Sans;"><img style="float: right; width: 321px; height: 85px;" alt="openSLP logo" title="openSLP" src="http://openslp.org/images/openslp_logo_web_color_150px.jpg"><a href="https://en.wikipedia.org/wiki/Service_Location_Protocol">Service Location Protocol</a> (SLP) defined by the </span><a style="font-family: DejaVu Sans;" href="https://www.ietf.org/"><em>Internet Engineering Task Force</em></a><span style="font-family: DejaVu Sans;">
 (IETF)&nbsp; allows
networking applications to discover the existence, location, and 
configuration of networked services. It is already used by WBEM, and also by Survol, for the same reasons. The<a href="https://en.wikipedia.org/wiki/Service_Location_Protocol"></a> chosen implementation for Survol, is <a href="http://www.openslp.org/">OpenSLP</a>, which has been ported to a wide variety of systems. It is run with the&nbsp;<span style="font-family: Courier New;">slptool</span><span style="font-family: DejaVu Sans;"> command from sub-processes. This prevents linking issues, 32bits/64bits compatibility problems etc... However,&nbsp;</span></span><span style="font-family: DejaVu Sans;"><span style="font-family: Courier New;">slptool</span><span style="font-family: DejaVu Sans;"></span></span><span style="font-family: DejaVu Sans;"><span style="font-family: DejaVu Sans;"> command must be accessible from the Python scripts.</span><br><br>It might be helpful to pre-register some services in the file <span style="font-family: Courier New;">slp.reg</span>. This is the right place to also register manually, WBEM services. An example of configuration is:<br><br><span style="font-family: Courier New;">#</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">service:wbem:http://mymachine-hp,en,65535 </span><br style="font-family: Courier New;"><span style="font-family: Courier New;">description=OpenPegasus under Windows 7</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;"># Definitions must be separated by an empty line.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">service:survol:http://</span></span><span style="font-family: Courier New;">mymachine</span><span style="font-family: DejaVu Sans;"><span style="font-family: Courier New;">-hp:8000/survol/entity.py,en,65535</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">description=Survol Windows 7</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">#</span><br><br>SLP
needs multicast, therefore some specific tuning network parameters and
routers might be necessary. Because SLP is a standard, Survol is able
to discover all WBEM service exposed with any implementation of SLP.<br><br><br>
Return to <a href="survol.htm">Survol</a>, its <a href="survol_architecture.html">architecture</a>, some</span><span style="font-family: DejaVu Sans;"> </span><span style="font-family: DejaVu Sans;"><a href="survol_use_cases.html">use cases</a>,</span><span style="font-family: DejaVu Sans;"></span><span style="font-family: DejaVu Sans;">
see the <a href="survol_faq.html">FAQs</a></span>,
<span style="font-family: DejaVu Sans;">or <a href="http://www.stack.nl/%7Edimitri/doxygen/">Doxygen</a>-generated
pages&nbsp;<a href="doxygen_docs/html/index.html">here</a>.</span><br style="font-weight: bold; font-family: DejaVu Sans;">
<span style="font-weight: bold; font-family: DejaVu Sans;"></span><br style="font-family: DejaVu Sans;">
</body></html>